"use strict";(self.webpackChunkreact_autosync_height=self.webpackChunkreact_autosync_height||[]).push([[552],{"./storybook/stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{DynamicChangeOfTheContent_ChildRerender:()=>DynamicChangeOfTheContent_ChildRerender,DynamicChangeOfTheContent_ChildrenHasReactAutosyncHeight:()=>DynamicChangeOfTheContent_ChildrenHasReactAutosyncHeight,DynamicChangeOfTheContent_Rerender:()=>DynamicChangeOfTheContent_Rerender,ExampleFromReadme:()=>ExampleFromReadme,default:()=>stories});var react=__webpack_require__("./node_modules/react/index.js");function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _toPrimitive(input,hint){if("object"!==_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==_typeof(res))return res;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return"symbol"===_typeof(key)?key:String(key)}function _defineProperty(obj,key,value){return(key=_toPropertyKey(key))in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _objectSpread2(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,_toPropertyKey(descriptor.key),descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}var react_dom=__webpack_require__("./node_modules/react-dom/index.js"),ALL_CATEGORIES="ALL_CATEGORIES",ATTRIBUTES="attributes",CHARACTER_DATA="characterData",CHILD_LIST="childList",MyMutationObserver=function(){function MyMutationObserver(el,onMutation,config){var _this=this;_classCallCheck(this,MyMutationObserver),this.observer=void 0,this.el=void 0,this.onMutation=void 0;var node=react_dom.findDOMNode(el);null!==node&&(this.el=el,this.onMutation=onMutation,this.observer=new MutationObserver(function(mutations){return mutations.forEach(_this.mutationReducer.bind(_this))}),this.observer.observe(node,config))}return _createClass(MyMutationObserver,[{key:"disconnect",value:function disconnect(){}},{key:"mutationReducer",value:function mutationReducer(payload){switch(payload.type){case ATTRIBUTES:return this.handleAttributes(payload);case CHARACTER_DATA:return this.handleCharacterData(payload);case CHILD_LIST:return this.handleChildList(payload)}}},{key:"handleAttributes",value:function handleAttributes(payload){var _getAttribute,oldValue=payload.oldValue,target=payload.target,attributeName=payload.attributeName,attributeNamespace=payload.attributeNamespace,res={from:null!=oldValue?oldValue:void 0,to:attributeName&&null!==(_getAttribute=target.getAttribute(attributeName))&&void 0!==_getAttribute?_getAttribute:void 0,name:null!=attributeName?attributeName:void 0,namespace:null!=attributeNamespace?attributeNamespace:void 0,target:target};this.onMutation(ATTRIBUTES,res)}},{key:"handleCharacterData",value:function handleCharacterData(payload){var oldValue=payload.oldValue,target=payload.target,res={from:null!=oldValue?oldValue:void 0,to:target.data,target:target};this.onMutation(CHARACTER_DATA,res)}},{key:"handleChildList",value:function handleChildList(payload){var _this2=this,addedNodes=payload.addedNodes,nextSibling=payload.nextSibling,previousSibling=payload.previousSibling,removedNodes=payload.removedNodes,res={target:payload.target,previousSibling:null!=previousSibling?previousSibling:void 0,nextSibling:null!=nextSibling?nextSibling:void 0,wrappedNode:this.el};addedNodes.length>0&&Array.from(addedNodes).forEach(function(child){_this2.onMutation("childAdded",_objectSpread2(_objectSpread2({},res),{},{child:child}))}),removedNodes.length>0&&Array.from(removedNodes).forEach(function(child){_this2.onMutation("childRemoved",_objectSpread2(_objectSpread2({},res),{},{child:child}))})}}],[{key:"buildConfig",value:function buildConfig(props){var _props$attributeList=props.attributeList,attributeList=void 0===_props$attributeList?[]:_props$attributeList,categories=props.categories,suppressAttributeOldValue=props.suppressAttributeOldValue,suppressCharacterDataOldValue=props.suppressCharacterDataOldValue,subtree=props.subtree,cats=MyMutationObserver.getCategories(categories);return{attributes:cats.indexOf(ATTRIBUTES)>-1,characterData:cats.indexOf(CHARACTER_DATA)>-1,childList:cats.indexOf(CHILD_LIST)>-1,attributeFilter:attributeList.length>0&&cats.indexOf(ATTRIBUTES)>-1?attributeList:void 0,attributeOldValue:!1===suppressAttributeOldValue&&cats.indexOf(ATTRIBUTES)>-1,characterDataOldValue:!1===suppressCharacterDataOldValue&&cats.indexOf(CHARACTER_DATA)>-1,subtree:subtree}}},{key:"getCategories",value:function getCategories(categories){return categories===ALL_CATEGORIES?[ATTRIBUTES,CHARACTER_DATA,CHILD_LIST]:"string"==typeof categories?[categories]:categories}}]),MyMutationObserver}(),cache={};function addToCache(id,el){el&&(void 0===cache[id]&&(cache[id]=[]),cache[id].push(el))}function removeFromCache(id,el){cache[id]=cache[id].filter(function(e){return e!==el})}function findAndApplyHeight(id,el,debug){if(el){if(0===el.offsetHeight){setTimeout(function(){return findAndApplyHeight(id,el,debug)},100);return}var elements=cache[id],maxHeight=0;elements.forEach(function(el){maxHeight=getMaximumHeight(maxHeight,el)});var count=0;return elements.forEach(function(el){var prevHeight=el.dataset.prevHeight;if(delete el.dataset.prevHeight,el.style.height!==prevHeight){var newHeight="".concat(maxHeight,"px");el.style.height!==newHeight&&(el.setAttribute("style","height:".concat(newHeight)),count++)}}),debug&&count>0&&console.info("[ReactAutosyncHeight] ".concat(id," : ").concat(maxHeight,"px (applied to ").concat(count," element").concat(1===count?"":"s",")")),maxHeight}}function getMaximumHeight(maxHeight,el){return Math.max(maxHeight,getElementHeight(el))}function getElementHeight(el){return Math.ceil(el.getBoundingClientRect().height)}let src_ReactAutosyncHeight=function(props){var children=props.children,_props$debug=props.debug,debug=void 0!==_props$debug&&_props$debug,id=props.id,elRef=react.useRef(),observerRef=react.useRef(),handleResize=react.useCallback(function(el){"auto"!==el.style.height&&(cache[id].forEach(function(el){"auto"!==el.style.height&&(el.dataset.prevHeight=el.style.height,el.setAttribute("style","height:auto"))}),requestAnimationFrame(function(){return findAndApplyHeight(id,el,debug)}))},[debug,id]),handleMutation=react.useCallback(function(type,payload){var el=elRef.current;(type!==ATTRIBUTES||payload.target!==el)&&void 0!==el&&handleResize(el)},[handleResize]),handleRef=react.useCallback(function(el){null!==el&&(addToCache(id,el),findAndApplyHeight(id,el,debug),elRef.current=el,handleResize(el),observerRef.current=new MyMutationObserver(el,handleMutation,MyMutationObserver.buildConfig({categories:ALL_CATEGORIES,subtree:!0})))},[handleMutation,handleResize,debug,id]);return react.useEffect(function(){return function(){var _observerRef$current;null===(_observerRef$current=observerRef.current)||void 0===_observerRef$current||_observerRef$current.disconnect(),elRef.current&&removeFromCache(id,elRef.current)}},[id]),react.createElement("div",{"data-cy":"ReactAutosyncHeight","data-react-autosync-height":id,ref:handleRef},children)};function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return}finally{if(_d)throw _e}}return _arr}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if("Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}}function _nonIterableRest(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest()}var DynamicComponent=function(props){var color=props.color,id=props.id,speed=props.speed,initialNumRows=(0,react.useMemo)(function(){return Math.ceil(5*Math.random())+1},[]),_useState2=_slicedToArray((0,react.useState)(initialNumRows),2),numRows=_useState2[0],setNumRows=_useState2[1],count=(0,react.useRef)(0);(0,react.useEffect)(function(){var timeout=setIntervalX(function(){return setNumRows(function(prevNumRows){return prevNumRows<2?prevNumRows+1:prevNumRows>=25?prevNumRows-1:(count.current++,count.current<=5?prevNumRows+1:prevNumRows-1)})},1e3*speed,10,id);return function(){return clearInterval(timeout)}},[count,speed]);var renderText=(0,react.useCallback)(function(){for(var rows=[],i=0;i<numRows;i++)rows.push("Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua.");return rows.join("\n")},[numRows]);return react.createElement("div",{style:{backgroundColor:color}},id,". ",renderText())};function setIntervalX(callback,delay,repetitions,meta){var x=0,intervalId=setInterval(function(){callback(intervalId),++x>=repetitions&&clearInterval(intervalId)},delay);return intervalId}var StaticComponent=function(props){var color=props.color,id=props.id,speed=props.speed;return react.createElement(src_ReactAutosyncHeight,{id:id},react.createElement(DynamicComponent,{id:id,color:color,speed:speed}))},StorybookComponent=function(props){var color=props.color,id=props.id,speed=props.speed,initialNumRows=(0,react.useMemo)(function(){return Math.ceil(5*Math.random())+1},[]),_useState2=_slicedToArray((0,react.useState)(initialNumRows),2),numRows=_useState2[0],setNumRows=_useState2[1],count=(0,react.useRef)(0);(0,react.useEffect)(function(){var timeout=StorybookComponent_setIntervalX(function(){return setNumRows(function(prevNumRows){return prevNumRows<2?prevNumRows+1:prevNumRows>=25?prevNumRows-1:(count.current++,count.current<=5?prevNumRows+1:prevNumRows-1)})},1e3*speed,10,id);return function(){return clearInterval(timeout)}},[count,speed]);var renderText=(0,react.useCallback)(function(){for(var rows=[],i=0;i<numRows;i++)rows.push("Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua.");return rows.join("\n")},[numRows]);return react.createElement(src_ReactAutosyncHeight,{id:id},react.createElement("div",{style:{backgroundColor:color}},id,". ",renderText()))};function StorybookComponent_setIntervalX(callback,delay,repetitions,meta){var x=0,intervalId=setInterval(function(){callback(intervalId),++x>=repetitions&&clearInterval(intervalId)},delay);return intervalId}var style={display:"grid",gridTemplateColumns:"repeat(2, minmax(300px ,500px))"},styleColumn={border:"solid 2px grey"};let stories={title:"ReactAutosyncHeight",component:src_ReactAutosyncHeight};var ExampleFromReadme=function(){return react.createElement("div",{style:style},react.createElement("div",{id:"Column1"},react.createElement(src_ReactAutosyncHeight,{id:"Section1"},"1. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua."),react.createElement(src_ReactAutosyncHeight,{id:"Section2"},"2. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua."),react.createElement(src_ReactAutosyncHeight,{id:"Section3"},"3. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua.")),react.createElement("div",{id:"Column2"},react.createElement(src_ReactAutosyncHeight,{id:"Section1"},"1. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet."),react.createElement(src_ReactAutosyncHeight,{id:"Section2"},"2. Lorem ipsum dolor sit amet, consetetur sadipscing elitr."),react.createElement(src_ReactAutosyncHeight,{id:"Section3"},"3. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua.")))};ExampleFromReadme.storyName="Example from Readme";var DynamicChangeOfTheContent_Rerender=function(){return react.createElement("div",{style:style},react.createElement("div",{id:"Column1"},react.createElement(StorybookComponent,{id:"Section1",speed:2,color:"aqua"}),react.createElement(StorybookComponent,{id:"Section2",speed:.5,color:"antiquewhite"}),react.createElement(StorybookComponent,{id:"Section3",speed:1,color:"aliceblue"})),react.createElement("div",{id:"Column2"},react.createElement(StorybookComponent,{id:"Section1",speed:1,color:"aqua"}),react.createElement(StorybookComponent,{id:"Section2",speed:1,color:"antiquewhite"}),react.createElement(StorybookComponent,{id:"Section3",speed:.4,color:"aliceblue"})))};DynamicChangeOfTheContent_Rerender.storyName="Dynamic change of the content (re-render)";var DynamicChangeOfTheContent_ChildRerender=function(){return react.createElement("div",{style:style},react.createElement("div",{id:"Column1"},react.createElement(StaticComponent,{id:"Section1",speed:2,color:"aqua"}),react.createElement(StaticComponent,{id:"Section2",speed:.5,color:"antiquewhite"}),react.createElement(StaticComponent,{id:"Section3",speed:1,color:"aliceblue"})),react.createElement("div",{id:"Column2"},react.createElement(StaticComponent,{id:"Section1",speed:1,color:"aqua"}),react.createElement(StaticComponent,{id:"Section2",speed:1,color:"antiquewhite"}),react.createElement(StaticComponent,{id:"Section3",speed:.4,color:"aliceblue"})))};DynamicChangeOfTheContent_ChildRerender.storyName="Dynamic change of the content (child re-render)";var DynamicChangeOfTheContent_ChildrenHasReactAutosyncHeight=function(){return react.createElement("div",{style:style},react.createElement(src_ReactAutosyncHeight,{id:"Column",debug:!0},react.createElement("div",{style:styleColumn},react.createElement(StaticComponent,{id:"Section1",speed:2,color:"aqua"}),react.createElement(StaticComponent,{id:"Section2",speed:.5,color:"antiquewhite"}),react.createElement(StaticComponent,{id:"Section3",speed:1,color:"aliceblue"}))),react.createElement(src_ReactAutosyncHeight,{id:"Column"},react.createElement("div",{style:styleColumn},react.createElement(StaticComponent,{id:"Section1",speed:1,color:"aqua"}),react.createElement(StaticComponent,{id:"Section2",speed:1,color:"antiquewhite"}),react.createElement(StaticComponent,{id:"Section3",speed:.4,color:"aliceblue"}))))};DynamicChangeOfTheContent_ChildrenHasReactAutosyncHeight.storyName="Dynamic change of the content (children has ReactAutosyncHeight)"}}]);